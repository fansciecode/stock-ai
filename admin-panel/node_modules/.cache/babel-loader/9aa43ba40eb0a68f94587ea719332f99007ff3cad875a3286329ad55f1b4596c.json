{"ast":null,"code":"import React from'react';import{Navigate,useLocation}from'react-router-dom';import{CircularProgress,Box}from'@mui/material';import{useAuth}from'../../contexts/AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";function ProtectedRoute(_ref){let{children,requiredPermissions=[],requiredRoles=[]}=_ref;const{user,loading,isAuthenticated,hasPermission,hasRole}=useAuth();const location=useLocation();if(loading){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",minHeight:\"100vh\",children:/*#__PURE__*/_jsx(CircularProgress,{})});}// Check if authenticated\ntry{if(!isAuthenticated()){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",state:{from:location},replace:true});}}catch(error){console.error('Authentication check error:',error);return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",state:{from:location},replace:true});}// Check permissions if specified\nif(requiredPermissions.length>0){try{const hasRequiredPermission=requiredPermissions.some(permission=>hasPermission(permission));if(!hasRequiredPermission){return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}}catch(error){console.error('Permission check error:',error);return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}}// Check roles if specified\nif(requiredRoles.length>0){try{const hasRequiredRole=requiredRoles.some(role=>hasRole(role));if(!hasRequiredRole){return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}}catch(error){console.error('Role check error:',error);return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}}return children;}export default ProtectedRoute;","map":{"version":3,"names":["React","Navigate","useLocation","CircularProgress","Box","useAuth","jsx","_jsx","ProtectedRoute","_ref","children","requiredPermissions","requiredRoles","user","loading","isAuthenticated","hasPermission","hasRole","location","display","justifyContent","alignItems","minHeight","to","state","from","replace","error","console","length","hasRequiredPermission","some","permission","hasRequiredRole","role"],"sources":["/Users/kirannaik/Desktop/zed/Android-fullstack-ibcm/admin-panel/src/components/Auth/ProtectedRoute.js"],"sourcesContent":["import React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { CircularProgress, Box } from '@mui/material';\nimport { useAuth } from '../../contexts/AuthContext';\n\nfunction ProtectedRoute({ children, requiredPermissions = [], requiredRoles = [] }) {\n  const { user, loading, isAuthenticated, hasPermission, hasRole } = useAuth();\n  const location = useLocation();\n\n  if (loading) {\n    return (\n      <Box\n        display=\"flex\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        minHeight=\"100vh\"\n      >\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  // Check if authenticated\n  try {\n    if (!isAuthenticated()) {\n      return <Navigate to=\"/login\" state={{ from: location }} replace />;\n    }\n  } catch (error) {\n    console.error('Authentication check error:', error);\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\n  }\n\n  // Check permissions if specified\n  if (requiredPermissions.length > 0) {\n    try {\n      const hasRequiredPermission = requiredPermissions.some(permission => hasPermission(permission));\n      if (!hasRequiredPermission) {\n        return <Navigate to=\"/\" replace />;\n      }\n    } catch (error) {\n      console.error('Permission check error:', error);\n      return <Navigate to=\"/\" replace />;\n    }\n  }\n\n  // Check roles if specified\n  if (requiredRoles.length > 0) {\n    try {\n      const hasRequiredRole = requiredRoles.some(role => hasRole(role));\n      if (!hasRequiredRole) {\n        return <Navigate to=\"/\" replace />;\n      }\n    } catch (error) {\n      console.error('Role check error:', error);\n      return <Navigate to=\"/\" replace />;\n    }\n  }\n\n  return children;\n}\n\nexport default ProtectedRoute; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,WAAW,KAAQ,kBAAkB,CACxD,OAASC,gBAAgB,CAAEC,GAAG,KAAQ,eAAe,CACrD,OAASC,OAAO,KAAQ,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAErD,QAAS,CAAAC,cAAcA,CAAAC,IAAA,CAA6D,IAA5D,CAAEC,QAAQ,CAAEC,mBAAmB,CAAG,EAAE,CAAEC,aAAa,CAAG,EAAG,CAAC,CAAAH,IAAA,CAChF,KAAM,CAAEI,IAAI,CAAEC,OAAO,CAAEC,eAAe,CAAEC,aAAa,CAAEC,OAAQ,CAAC,CAAGZ,OAAO,CAAC,CAAC,CAC5E,KAAM,CAAAa,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAE9B,GAAIY,OAAO,CAAE,CACX,mBACEP,IAAA,CAACH,GAAG,EACFe,OAAO,CAAC,MAAM,CACdC,cAAc,CAAC,QAAQ,CACvBC,UAAU,CAAC,QAAQ,CACnBC,SAAS,CAAC,OAAO,CAAAZ,QAAA,cAEjBH,IAAA,CAACJ,gBAAgB,GAAE,CAAC,CACjB,CAAC,CAEV,CAEA;AACA,GAAI,CACF,GAAI,CAACY,eAAe,CAAC,CAAC,CAAE,CACtB,mBAAOR,IAAA,CAACN,QAAQ,EAACsB,EAAE,CAAC,QAAQ,CAACC,KAAK,CAAE,CAAEC,IAAI,CAAEP,QAAS,CAAE,CAACQ,OAAO,MAAE,CAAC,CACpE,CACF,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACnD,mBAAOpB,IAAA,CAACN,QAAQ,EAACsB,EAAE,CAAC,QAAQ,CAACC,KAAK,CAAE,CAAEC,IAAI,CAAEP,QAAS,CAAE,CAACQ,OAAO,MAAE,CAAC,CACpE,CAEA;AACA,GAAIf,mBAAmB,CAACkB,MAAM,CAAG,CAAC,CAAE,CAClC,GAAI,CACF,KAAM,CAAAC,qBAAqB,CAAGnB,mBAAmB,CAACoB,IAAI,CAACC,UAAU,EAAIhB,aAAa,CAACgB,UAAU,CAAC,CAAC,CAC/F,GAAI,CAACF,qBAAqB,CAAE,CAC1B,mBAAOvB,IAAA,CAACN,QAAQ,EAACsB,EAAE,CAAC,GAAG,CAACG,OAAO,MAAE,CAAC,CACpC,CACF,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/C,mBAAOpB,IAAA,CAACN,QAAQ,EAACsB,EAAE,CAAC,GAAG,CAACG,OAAO,MAAE,CAAC,CACpC,CACF,CAEA;AACA,GAAId,aAAa,CAACiB,MAAM,CAAG,CAAC,CAAE,CAC5B,GAAI,CACF,KAAM,CAAAI,eAAe,CAAGrB,aAAa,CAACmB,IAAI,CAACG,IAAI,EAAIjB,OAAO,CAACiB,IAAI,CAAC,CAAC,CACjE,GAAI,CAACD,eAAe,CAAE,CACpB,mBAAO1B,IAAA,CAACN,QAAQ,EAACsB,EAAE,CAAC,GAAG,CAACG,OAAO,MAAE,CAAC,CACpC,CACF,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,mBAAmB,CAAEA,KAAK,CAAC,CACzC,mBAAOpB,IAAA,CAACN,QAAQ,EAACsB,EAAE,CAAC,GAAG,CAACG,OAAO,MAAE,CAAC,CACpC,CACF,CAEA,MAAO,CAAAhB,QAAQ,CACjB,CAEA,cAAe,CAAAF,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}