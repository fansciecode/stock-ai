{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{Grid,Paper,Typography,Box,CircularProgress,Alert,Button}from'@mui/material';import{People as PeopleIcon,Business as BusinessIcon,LocalShipping as LocalShippingIcon,AttachMoney as AttachMoneyIcon,Refresh as RefreshIcon}from'@mui/icons-material';import{statsAPI}from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StatCard=_ref=>{let{title,value,icon,loading}=_ref;return/*#__PURE__*/_jsxs(Paper,{sx:{p:3,display:'flex',flexDirection:'column',height:140,position:'relative',overflow:'hidden'},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",sx:{color:'text.secondary'},children:title}),/*#__PURE__*/_jsx(Box,{sx:{color:'primary.main'},children:icon})]}),/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1,display:'flex',alignItems:'center'},children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:24}):/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"div\",children:value})})]});};function Dashboard(){const[stats,setStats]=useState({totalUsers:0,totalBusinesses:0,totalDeliveries:0,totalRevenue:0});const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const fetchStats=useCallback(async()=>{try{setLoading(true);setError(null);console.log('Fetching dashboard stats...');const response=await statsAPI.getDashboardStats();console.log('Dashboard stats received:',response.data);setStats(response.data);}catch(err){console.error('Error fetching dashboard stats:',err);setError(err.message||'Failed to fetch dashboard statistics');}finally{setLoading(false);}},[]);useEffect(()=>{fetchStats();},[fetchStats]);if(error){return/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:/*#__PURE__*/_jsxs(Alert,{severity:\"error\",action:/*#__PURE__*/_jsx(Button,{color:\"inherit\",size:\"small\",onClick:fetchStats,startIcon:/*#__PURE__*/_jsx(RefreshIcon,{}),children:\"Retry\"}),children:[\"Error loading dashboard: \",error]})});}return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(RefreshIcon,{}),onClick:fetchStats,disabled:loading,children:\"Refresh\"})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(StatCard,{title:\"Total Users\",value:stats.totalUsers.toLocaleString(),icon:/*#__PURE__*/_jsx(PeopleIcon,{}),loading:loading})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(StatCard,{title:\"Total Businesses\",value:stats.totalBusinesses.toLocaleString(),icon:/*#__PURE__*/_jsx(BusinessIcon,{}),loading:loading})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(StatCard,{title:\"Total Deliveries\",value:stats.totalDeliveries.toLocaleString(),icon:/*#__PURE__*/_jsx(LocalShippingIcon,{}),loading:loading})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(StatCard,{title:\"Total Revenue\",value:`$${stats.totalRevenue.toLocaleString()}`,icon:/*#__PURE__*/_jsx(AttachMoneyIcon,{}),loading:loading})})]})]});}export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useCallback","Grid","Paper","Typography","Box","CircularProgress","Alert","Button","People","PeopleIcon","Business","BusinessIcon","LocalShipping","LocalShippingIcon","AttachMoney","AttachMoneyIcon","Refresh","RefreshIcon","statsAPI","jsx","_jsx","jsxs","_jsxs","StatCard","_ref","title","value","icon","loading","sx","p","display","flexDirection","height","position","overflow","children","justifyContent","alignItems","mb","variant","component","color","flexGrow","size","Dashboard","stats","setStats","totalUsers","totalBusinesses","totalDeliveries","totalRevenue","setLoading","error","setError","fetchStats","console","log","response","getDashboardStats","data","err","message","mt","severity","action","onClick","startIcon","disabled","container","spacing","item","xs","sm","md","toLocaleString"],"sources":["/Users/kirannaik/Desktop/zed/Android-fullstack-ibcm/admin-panel/src/components/Dashboard/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { Grid, Paper, Typography, Box, CircularProgress, Alert, Button } from '@mui/material';\nimport {\n  People as PeopleIcon,\n  Business as BusinessIcon,\n  LocalShipping as LocalShippingIcon,\n  AttachMoney as AttachMoneyIcon,\n  Refresh as RefreshIcon\n} from '@mui/icons-material';\nimport { statsAPI } from '../../services/api';\n\nconst StatCard = ({ title, value, icon, loading }) => (\n  <Paper\n    sx={{\n      p: 3,\n      display: 'flex',\n      flexDirection: 'column',\n      height: 140,\n      position: 'relative',\n      overflow: 'hidden'\n    }}\n  >\n    <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n      <Typography variant=\"h6\" component=\"div\" sx={{ color: 'text.secondary' }}>\n        {title}\n      </Typography>\n      <Box sx={{ color: 'primary.main' }}>{icon}</Box>\n    </Box>\n    <Box sx={{ flexGrow: 1, display: 'flex', alignItems: 'center' }}>\n      {loading ? (\n        <CircularProgress size={24} />\n      ) : (\n        <Typography variant=\"h4\" component=\"div\">\n          {value}\n        </Typography>\n      )}\n    </Box>\n  </Paper>\n);\n\nfunction Dashboard() {\n  const [stats, setStats] = useState({\n    totalUsers: 0,\n    totalBusinesses: 0,\n    totalDeliveries: 0,\n    totalRevenue: 0\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const fetchStats = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      console.log('Fetching dashboard stats...');\n      const response = await statsAPI.getDashboardStats();\n      console.log('Dashboard stats received:', response.data);\n      setStats(response.data);\n    } catch (err) {\n      console.error('Error fetching dashboard stats:', err);\n      setError(err.message || 'Failed to fetch dashboard statistics');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchStats();\n  }, [fetchStats]);\n\n  if (error) {\n    return (\n      <Box sx={{ mt: 2 }}>\n        <Alert \n          severity=\"error\" \n          action={\n            <Button color=\"inherit\" size=\"small\" onClick={fetchStats} startIcon={<RefreshIcon />}>\n              Retry\n            </Button>\n          }\n        >\n          Error loading dashboard: {error}\n        </Alert>\n      </Box>\n    );\n  }\n\n  return (\n    <Box>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Typography variant=\"h4\">\n          Dashboard\n        </Typography>\n        <Button\n          variant=\"outlined\"\n          startIcon={<RefreshIcon />}\n          onClick={fetchStats}\n          disabled={loading}\n        >\n          Refresh\n        </Button>\n      </Box>\n      <Grid container spacing={3}>\n        <Grid item xs={12} sm={6} md={3}>\n          <StatCard\n            title=\"Total Users\"\n            value={stats.totalUsers.toLocaleString()}\n            icon={<PeopleIcon />}\n            loading={loading}\n          />\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <StatCard\n            title=\"Total Businesses\"\n            value={stats.totalBusinesses.toLocaleString()}\n            icon={<BusinessIcon />}\n            loading={loading}\n          />\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <StatCard\n            title=\"Total Deliveries\"\n            value={stats.totalDeliveries.toLocaleString()}\n            icon={<LocalShippingIcon />}\n            loading={loading}\n          />\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <StatCard\n            title=\"Total Revenue\"\n            value={`$${stats.totalRevenue.toLocaleString()}`}\n            icon={<AttachMoneyIcon />}\n            loading={loading}\n          />\n        </Grid>\n      </Grid>\n    </Box>\n  );\n}\n\nexport default Dashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}