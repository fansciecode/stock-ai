{"ast":null,"code":"import api from'./api';class ExternalEventService{constructor(){this.baseUrl='/api/external-events';}/**\n   * Get external events with filters\n   * @param {Object} params - Filter parameters\n   * @param {string} params.category - Event category\n   * @param {string} params.location - Event location\n   * @param {string} params.date - Event date\n   * @param {number} params.page - Page number\n   * @param {string} params.query - Search query\n   * @returns {Promise<Object>} Events response\n   */async getExternalEvents(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};try{const queryParams=new URLSearchParams();if(params.category)queryParams.append('category',params.category);if(params.location)queryParams.append('location',params.location);if(params.date)queryParams.append('date',params.date);if(params.page)queryParams.append('page',params.page);if(params.query)queryParams.append('query',params.query);const response=await api.get(`${this.baseUrl}?${queryParams.toString()}`);if(response.success){return{events:response.data.events||[],currentPage:response.data.currentPage||1,totalPages:response.data.totalPages||1,totalCount:response.data.totalCount||0};}else{// Return mock data if API fails\nreturn this.getMockEvents(params);}}catch(error){console.error('Failed to fetch external events:',error);// Return mock data as fallback\nreturn this.getMockEvents(params);}}/**\n   * Get external event details\n   * @param {string} source - Event source (google, facebook, etc.)\n   * @param {string} eventId - Event ID\n   * @returns {Promise<Object>} Event details\n   */async getExternalEventDetails(source,eventId){try{const response=await api.get(`${this.baseUrl}/${source}/${eventId}`);if(response.success){return{success:true,data:response.data};}else{return{success:false,error:response.error||'Failed to fetch event details'};}}catch(error){console.error('Failed to fetch external event details:',error);// Return mock data as fallback\nconst mockEvent=this.getMockEventDetails(eventId);return{success:true,data:mockEvent};}}/**\n   * Register for external event\n   * @param {string} eventId - Event ID\n   * @param {Object} registrationData - Registration data\n   * @returns {Promise<Object>} Registration response\n   */async registerForEvent(eventId,registrationData){try{const response=await api.post(`${this.baseUrl}/${eventId}/register`,registrationData);if(response.success){return{success:true,data:response.data};}else{return{success:false,error:response.error||'Registration failed'};}}catch(error){console.error('Failed to register for event:',error);// Return mock success response\nreturn{success:true,data:{registrationId:`reg_${Date.now()}`,eventId:eventId,confirmationCode:`CONF-${Math.floor(10000+Math.random()*90000)}`,registrationDate:Date.now(),status:'CONFIRMED'}};}}/**\n   * Get event categories\n   * @returns {Promise<Array>} Categories list\n   */async getCategories(){try{const response=await api.get(`${this.baseUrl}/categories`);if(response.success){return response.data;}else{return this.getMockCategories();}}catch(error){console.error('Failed to fetch categories:',error);return this.getMockCategories();}}/**\n   * Search external events\n   * @param {string} query - Search query\n   * @param {Object} filters - Additional filters\n   * @returns {Promise<Object>} Search results\n   */async searchEvents(query){let filters=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};try{const params={query,...filters};return await this.getExternalEvents(params);}catch(error){console.error('Failed to search events:',error);return{events:[],currentPage:1,totalPages:1,totalCount:0};}}/**\n   * Get popular external events\n   * @param {number} limit - Number of events to fetch\n   * @returns {Promise<Array>} Popular events\n   */async getPopularEvents(){let limit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:10;try{const response=await api.get(`${this.baseUrl}/popular?limit=${limit}`);if(response.success){return response.data;}else{return this.getMockPopularEvents(limit);}}catch(error){console.error('Failed to fetch popular events:',error);return this.getMockPopularEvents(limit);}}/**\n   * Get events by location\n   * @param {number} latitude - Latitude\n   * @param {number} longitude - Longitude\n   * @param {number} radius - Search radius in kilometers\n   * @returns {Promise<Array>} Nearby events\n   */async getEventsByLocation(latitude,longitude){let radius=arguments.length>2&&arguments[2]!==undefined?arguments[2]:50;try{const response=await api.get(`${this.baseUrl}/nearby?lat=${latitude}&lng=${longitude}&radius=${radius}`);if(response.success){return response.data;}else{return this.getMockNearbyEvents();}}catch(error){console.error('Failed to fetch events by location:',error);return this.getMockNearbyEvents();}}// Mock data methods for fallback\ngetMockEvents(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const mockEvents=[{id:'ext1',title:'Summer Music Festival',description:'Annual music festival featuring top artists from around the world. Join us for an unforgettable experience with live performances, food trucks, and entertainment.',category:'music',date:'2024-07-15',location:{address:'Central Park, New York, NY',city:'New York',state:'NY',latitude:40.785091,longitude:-73.968285},imageUrl:'https://images.unsplash.com/photo-1459749411175-04bf5292ceea?w=400',price:89.99,organizer:'NYC Events',source:'external'},{id:'ext2',title:'Tech Conference 2024',description:'Explore the latest in technology and innovation. Network with industry leaders and discover cutting-edge solutions.',category:'tech',date:'2024-08-22',location:{address:'Convention Center, San Francisco, CA',city:'San Francisco',state:'CA',latitude:37.783333,longitude:-122.416667},imageUrl:'https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=400',price:299.99,organizer:'TechCorp',source:'external'},{id:'ext3',title:'Art Exhibition: Modern Masters',description:'Featuring works from contemporary artists. Discover new perspectives and artistic expressions.',category:'art',date:'2024-09-10',location:{address:'Metropolitan Museum, New York, NY',city:'New York',state:'NY',latitude:40.779437,longitude:-73.963244},imageUrl:'https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400',price:24.50,organizer:'ArtCo',source:'external'},{id:'ext4',title:'Food & Wine Festival',description:'Taste dishes and wines from award-winning chefs and vineyards. A culinary adventure awaits.',category:'food',date:'2024-07-30',location:{address:'Waterfront Park, Chicago, IL',city:'Chicago',state:'IL',latitude:41.878113,longitude:-87.629799},imageUrl:'https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=400',price:65.00,organizer:'Culinary Events',source:'external'},{id:'ext5',title:'Marathon 2024',description:'Annual city marathon with routes for all skill levels. Challenge yourself and support a great cause.',category:'sports',date:'2024-10-15',location:{address:'Downtown, Boston, MA',city:'Boston',state:'MA',latitude:42.361145,longitude:-71.057083},imageUrl:'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400',price:45.00,organizer:'Boston Athletic Association',source:'external'},{id:'ext6',title:'Startup Pitch Competition',description:'Watch innovative startups pitch their ideas to investors. Network with entrepreneurs and investors.',category:'business',date:'2024-06-20',location:{address:'Innovation Hub, Austin, TX',city:'Austin',state:'TX',latitude:30.267153,longitude:-97.743061},imageUrl:'https://images.unsplash.com/photo-1556761175-4b46a572b786?w=400',price:0,organizer:'Startup Austin',source:'external'}];// Apply filters\nlet filteredEvents=mockEvents;if(params.category&&params.category!=='all'){filteredEvents=filteredEvents.filter(event=>event.category===params.category);}if(params.location){filteredEvents=filteredEvents.filter(event=>event.location.address.toLowerCase().includes(params.location.toLowerCase())||event.location.city.toLowerCase().includes(params.location.toLowerCase()));}if(params.date){filteredEvents=filteredEvents.filter(event=>event.date===params.date);}if(params.query){const query=params.query.toLowerCase();filteredEvents=filteredEvents.filter(event=>event.title.toLowerCase().includes(query)||event.description.toLowerCase().includes(query)||event.organizer.toLowerCase().includes(query));}// Pagination\nconst page=params.page||1;const pageSize=6;const startIndex=(page-1)*pageSize;const endIndex=startIndex+pageSize;const paginatedEvents=filteredEvents.slice(startIndex,endIndex);return{events:paginatedEvents,currentPage:page,totalPages:Math.ceil(filteredEvents.length/pageSize),totalCount:filteredEvents.length};}getMockEventDetails(eventId){const mockEvents=this.getMockEvents().events;const event=mockEvents.find(e=>e.id===eventId);if(event){return{...event,longDescription:event.description+' This is a detailed description with more information about the event, including what to expect, schedule, and additional details.',schedule:[{time:'09:00',activity:'Registration & Check-in'},{time:'10:00',activity:'Opening Ceremony'},{time:'11:00',activity:'Main Event'},{time:'15:00',activity:'Break & Networking'},{time:'16:00',activity:'Closing Ceremony'}],requirements:['Valid photo ID required','Minimum age 18 (or 21 for alcohol events)','Comfortable clothing recommended'],amenities:['Free WiFi','Food & Beverages','Parking Available','Accessibility Compliant']};}return null;}getMockCategories(){return[{id:'all',name:'All Categories'},{id:'music',name:'Music & Concerts'},{id:'tech',name:'Technology'},{id:'art',name:'Arts & Culture'},{id:'food',name:'Food & Drink'},{id:'sports',name:'Sports & Fitness'},{id:'business',name:'Business & Professional'},{id:'entertainment',name:'Entertainment'},{id:'education',name:'Education & Learning'},{id:'health',name:'Health & Wellness'},{id:'community',name:'Community & Social'}];}getMockPopularEvents(limit){const mockEvents=this.getMockEvents().events;return mockEvents.slice(0,limit);}getMockNearbyEvents(){return this.getMockEvents().events.slice(0,3);}}export const externalEventService=new ExternalEventService();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}