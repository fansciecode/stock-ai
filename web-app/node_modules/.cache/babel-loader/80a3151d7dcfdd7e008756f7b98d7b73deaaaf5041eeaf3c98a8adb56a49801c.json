{"ast":null,"code":"import React,{useState}from'react';import{Form,Input,Button,Card,Typography,Alert,Row,Col,Steps,Result}from'antd';import{MailOutlined,ArrowLeftOutlined,CheckCircleOutlined}from'@ant-design/icons';import{Link,useNavigate}from'react-router-dom';import{useAuth}from'../../contexts/AuthContext';import{useNotification}from'../../contexts/NotificationContext';import'./AuthScreen.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Title,Text,Paragraph}=Typography;const{Step}=Steps;const ForgotPasswordScreen=()=>{const[form]=Form.useForm();const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[currentStep,setCurrentStep]=useState(0);const[email,setEmail]=useState('');const{forgotPassword}=useAuth();const{showSuccess,showError}=useNotification();const navigate=useNavigate();const onFinish=async values=>{try{setLoading(true);setError(null);const result=await forgotPassword(values.email);if(result.success){setEmail(values.email);setCurrentStep(1);showSuccess('Email Sent','Password reset instructions have been sent to your email');}else{setError(result.message);showError('Failed to Send Email',result.message);}}catch(error){var _error$response,_error$response$data;const errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to send reset email. Please try again.';setError(errorMessage);showError('Failed to Send Email',errorMessage);}finally{setLoading(false);}};const handleBackToLogin=()=>{navigate('/login');};const handleResendEmail=async()=>{if(email){try{setLoading(true);const result=await forgotPassword(email);if(result.success){showSuccess('Email Resent','Password reset instructions have been sent again');}else{showError('Failed to Resend Email',result.message);}}catch(error){showError('Failed to Resend Email','Please try again later');}finally{setLoading(false);}}};const renderEmailForm=()=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"auth-header\",children:[/*#__PURE__*/_jsx(Title,{level:2,className:\"auth-title\",children:\"Forgot Password?\"}),/*#__PURE__*/_jsx(Text,{type:\"secondary\",className:\"auth-subtitle\",children:\"Enter your email address and we'll send you instructions to reset your password\"})]}),error&&/*#__PURE__*/_jsx(Alert,{message:error,type:\"error\",closable:true,onClose:()=>setError(null),style:{marginBottom:24}}),/*#__PURE__*/_jsxs(Form,{form:form,name:\"forgotPassword\",onFinish:onFinish,layout:\"vertical\",size:\"large\",className:\"auth-form\",children:[/*#__PURE__*/_jsx(Form.Item,{name:\"email\",label:\"Email Address\",rules:[{required:true,message:'Please input your email!'},{type:'email',message:'Please enter a valid email!'}],children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(MailOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Enter your email address\",autoComplete:\"email\",autoFocus:true})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",className:\"auth-button\",loading:loading,block:true,children:\"Send Reset Instructions\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"auth-footer\",children:/*#__PURE__*/_jsx(Button,{type:\"link\",icon:/*#__PURE__*/_jsx(ArrowLeftOutlined,{}),onClick:handleBackToLogin,className:\"auth-back-button\",children:\"Back to Login\"})})]});const renderSuccessMessage=()=>/*#__PURE__*/_jsx(Result,{icon:/*#__PURE__*/_jsx(CheckCircleOutlined,{style:{color:'#52c41a'}}),title:\"Check Your Email\",subTitle:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Paragraph,{children:\"We've sent password reset instructions to:\"}),/*#__PURE__*/_jsx(Paragraph,{strong:true,style:{color:'#1890ff',fontSize:'16px'},children:email}),/*#__PURE__*/_jsx(Paragraph,{type:\"secondary\",children:\"Please check your email and follow the instructions to reset your password. If you don't see the email, check your spam folder.\"})]}),extra:[/*#__PURE__*/_jsx(Button,{onClick:handleBackToLogin,children:\"Back to Login\"},\"login\"),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:handleResendEmail,loading:loading,children:\"Resend Email\"},\"resend\")]});return/*#__PURE__*/_jsx(\"div\",{className:\"auth-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"auth-background\",children:/*#__PURE__*/_jsx(\"div\",{className:\"auth-overlay\",children:/*#__PURE__*/_jsx(Row,{justify:\"center\",align:\"middle\",style:{minHeight:'100vh'},children:/*#__PURE__*/_jsx(Col,{xs:22,sm:20,md:16,lg:12,xl:10,children:/*#__PURE__*/_jsxs(Card,{className:\"auth-card\",bordered:false,children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:24},children:/*#__PURE__*/_jsxs(Steps,{current:currentStep,size:\"small\",children:[/*#__PURE__*/_jsx(Step,{title:\"Enter Email\"}),/*#__PURE__*/_jsx(Step,{title:\"Check Email\"})]})}),currentStep===0&&renderEmailForm(),currentStep===1&&renderSuccessMessage()]})})})})})});};export default ForgotPasswordScreen;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}