{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Row,Col,Card,Statistic,Typography,Avatar,Button,List,Badge,Progress,Calendar,Timeline,Tabs,Space,Divider,Tag,Empty,Skeleton,Radio,Alert}from'antd';import{UserOutlined,CalendarOutlined,TeamOutlined,DollarOutlined,TrophyOutlined,BellOutlined,PlusOutlined,EyeOutlined,HeartOutlined,ShareAltOutlined,SettingOutlined,RobotOutlined,ArrowUpOutlined as TrendingUpOutlined,SmileOutlined,RiseOutlined}from'@ant-design/icons';import{useNavigate}from'react-router-dom';import{useAuth}from'../../contexts/AuthContext';import{useNotification}from'../../contexts/NotificationContext';import'./DashboardScreen.css';import aiService from\"../../services/aiService\";import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const{Title,Text,Paragraph}=Typography;const{TabPane}=Tabs;const DashboardScreen=()=>{const[loading,setLoading]=useState(true);const[dashboardData,setDashboardData]=useState(null);const[selectedDate,setSelectedDate]=useState(null);const[activeTab,setActiveTab]=useState('overview');const{user}=useAuth();const{showSuccess,showError}=useNotification();const navigate=useNavigate();const[businessAnalytics,setBusinessAnalytics]=useState(null);const[analyticsLoading,setAnalyticsLoading]=useState(false);const[analyticsPeriod,setAnalyticsPeriod]=useState('month');useEffect(()=>{loadDashboardData();if(user&&user.businessId){loadBusinessAnalytics(analyticsPeriod);}},[user===null||user===void 0?void 0:user.businessId,analyticsPeriod]);const loadDashboardData=async()=>{try{setLoading(true);// Simulate API call\nawait new Promise(resolve=>setTimeout(resolve,1000));// Mock data - replace with actual API call\nsetDashboardData({stats:{totalEvents:15,upcomingEvents:8,totalAttendees:1250,totalRevenue:45000,growthRate:12.5},recentEvents:[{id:1,title:'Tech Conference 2024',date:'2024-02-15',attendees:150,status:'upcoming',image:'/api/placeholder/60/60'},{id:2,title:'Business Networking',date:'2024-02-10',attendees:75,status:'completed',image:'/api/placeholder/60/60'},{id:3,title:'Workshop Series',date:'2024-02-20',attendees:45,status:'upcoming',image:'/api/placeholder/60/60'}],notifications:[{id:1,title:'New event registration',message:'John Doe registered for Tech Conference 2024',time:'2 hours ago',type:'success'},{id:2,title:'Payment received',message:'Payment of $299 received for Business Networking',time:'4 hours ago',type:'info'},{id:3,title:'Event reminder',message:'Workshop Series starts in 3 days',time:'1 day ago',type:'warning'}],activities:[{id:1,action:'Created new event',item:'Tech Conference 2024',time:'2024-02-01 10:30'},{id:2,action:'Updated event details',item:'Business Networking',time:'2024-01-30 14:15'},{id:3,action:'Published event',item:'Workshop Series',time:'2024-01-28 09:45'}]});}catch(error){console.error('Error loading dashboard data:',error);showError('Error','Failed to load dashboard data');}finally{setLoading(false);}};const loadBusinessAnalytics=async function(){let period=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'month';if(!user||!user.businessId)return;setAnalyticsLoading(true);try{const analytics=await aiService.getBusinessAnalytics(user.businessId,period);setBusinessAnalytics(analytics);}catch(error){console.error(\"Failed to load business analytics:\",error);}finally{setAnalyticsLoading(false);}};const handleCreateEvent=()=>{navigate('/create-event');};const handleViewAllEvents=()=>{navigate('/events');};const handleEventClick=eventId=>{navigate(`/events/${eventId}`);};const onPanelChange=(value,mode)=>{setSelectedDate(value);};const handlePeriodChange=period=>{setAnalyticsPeriod(period);};const renderOverviewTab=()=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Card,{className:\"welcome-card\",bordered:false,children:/*#__PURE__*/_jsxs(Row,{align:\"middle\",gutter:[24,24],children:[/*#__PURE__*/_jsx(Col,{flex:\"auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"welcome-content\",children:[/*#__PURE__*/_jsxs(Title,{level:2,className:\"welcome-title\",children:[\"Welcome back, \",(user===null||user===void 0?void 0:user.firstName)||'User',\"! \\uD83D\\uDC4B\"]}),/*#__PURE__*/_jsx(Paragraph,{className:\"welcome-subtitle\",children:\"Here's what's happening with your events today\"})]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"large\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:handleCreateEvent,className:\"create-event-btn\",children:\"Create Event\"})})]})}),/*#__PURE__*/_jsxs(Row,{gutter:[16,16],className:\"stats-row\",children:[/*#__PURE__*/_jsx(Col,{xs:24,sm:12,lg:6,children:/*#__PURE__*/_jsx(Card,{className:\"stat-card\",children:/*#__PURE__*/_jsx(Statistic,{title:\"Total Events\",value:dashboardData===null||dashboardData===void 0?void 0:dashboardData.stats.totalEvents,prefix:/*#__PURE__*/_jsx(CalendarOutlined,{style:{color:'#1890ff'}}),loading:loading})})}),/*#__PURE__*/_jsx(Col,{xs:24,sm:12,lg:6,children:/*#__PURE__*/_jsx(Card,{className:\"stat-card\",children:/*#__PURE__*/_jsx(Statistic,{title:\"Upcoming Events\",value:dashboardData===null||dashboardData===void 0?void 0:dashboardData.stats.upcomingEvents,prefix:/*#__PURE__*/_jsx(CalendarOutlined,{style:{color:'#52c41a'}}),loading:loading})})}),/*#__PURE__*/_jsx(Col,{xs:24,sm:12,lg:6,children:/*#__PURE__*/_jsx(Card,{className:\"stat-card\",children:/*#__PURE__*/_jsx(Statistic,{title:\"Total Attendees\",value:dashboardData===null||dashboardData===void 0?void 0:dashboardData.stats.totalAttendees,prefix:/*#__PURE__*/_jsx(TeamOutlined,{style:{color:'#722ed1'}}),loading:loading})})}),/*#__PURE__*/_jsx(Col,{xs:24,sm:12,lg:6,children:/*#__PURE__*/_jsx(Card,{className:\"stat-card\",children:/*#__PURE__*/_jsx(Statistic,{title:\"Total Revenue\",value:dashboardData===null||dashboardData===void 0?void 0:dashboardData.stats.totalRevenue,prefix:/*#__PURE__*/_jsx(DollarOutlined,{style:{color:'#fa8c16'}}),precision:0,loading:loading})})})]}),/*#__PURE__*/_jsxs(Row,{gutter:[16,16],className:\"main-content\",children:[/*#__PURE__*/_jsxs(Col,{xs:24,lg:16,children:[/*#__PURE__*/_jsx(Card,{title:\"Recent Events\",extra:/*#__PURE__*/_jsx(Button,{type:\"link\",onClick:handleViewAllEvents,children:\"View All\"}),className:\"recent-events-card\",children:loading?/*#__PURE__*/_jsx(Skeleton,{active:true}):/*#__PURE__*/_jsx(List,{dataSource:dashboardData===null||dashboardData===void 0?void 0:dashboardData.recentEvents,renderItem:event=>/*#__PURE__*/_jsxs(List.Item,{className:\"event-item\",onClick:()=>handleEventClick(event.id),children:[/*#__PURE__*/_jsx(List.Item.Meta,{avatar:/*#__PURE__*/_jsx(Avatar,{src:event.image,size:48,icon:/*#__PURE__*/_jsx(CalendarOutlined,{})}),title:/*#__PURE__*/_jsxs(\"div\",{className:\"event-title\",children:[event.title,/*#__PURE__*/_jsx(Tag,{color:event.status==='upcoming'?'blue':'green',className:\"event-status\",children:event.status})]}),description:/*#__PURE__*/_jsxs(\"div\",{className:\"event-details\",children:[/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:event.date}),/*#__PURE__*/_jsx(Divider,{type:\"vertical\"}),/*#__PURE__*/_jsxs(Text,{type:\"secondary\",children:[/*#__PURE__*/_jsx(TeamOutlined,{}),\" \",event.attendees,\" attendees\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-actions\",children:[/*#__PURE__*/_jsx(Button,{type:\"text\",icon:/*#__PURE__*/_jsx(EyeOutlined,{}),size:\"small\"}),/*#__PURE__*/_jsx(Button,{type:\"text\",icon:/*#__PURE__*/_jsx(SettingOutlined,{}),size:\"small\"})]})]},event.id)})}),/*#__PURE__*/_jsx(Card,{title:\"Performance Overview\",className:\"performance-card\",children:/*#__PURE__*/_jsxs(Row,{gutter:[16,16],children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(\"div\",{className:\"performance-item\",children:[/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:\"Event Completion Rate\"}),/*#__PURE__*/_jsx(Progress,{percent:85,strokeColor:\"#52c41a\",className:\"performance-progress\"})]})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(\"div\",{className:\"performance-item\",children:[/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:\"Attendance Rate\"}),/*#__PURE__*/_jsx(Progress,{percent:92,strokeColor:\"#1890ff\",className:\"performance-progress\"})]})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(\"div\",{className:\"performance-item\",children:[/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:\"Revenue Growth\"}),/*#__PURE__*/_jsx(Progress,{percent:dashboardData===null||dashboardData===void 0?void 0:dashboardData.stats.growthRate,strokeColor:\"#fa8c16\",className:\"performance-progress\"})]})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(\"div\",{className:\"performance-item\",children:[/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:\"Customer Satisfaction\"}),/*#__PURE__*/_jsx(Progress,{percent:88,strokeColor:\"#722ed1\",className:\"performance-progress\"})]})})]})})]}),/*#__PURE__*/_jsxs(Col,{xs:24,lg:8,children:[/*#__PURE__*/_jsx(Card,{title:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(BellOutlined,{}),\"Notifications\",/*#__PURE__*/_jsx(Badge,{count:dashboardData===null||dashboardData===void 0?void 0:dashboardData.notifications.length})]}),className:\"notifications-card\",children:loading?/*#__PURE__*/_jsx(Skeleton,{active:true}):/*#__PURE__*/_jsx(List,{dataSource:dashboardData===null||dashboardData===void 0?void 0:dashboardData.notifications,renderItem:notification=>/*#__PURE__*/_jsx(List.Item,{className:\"notification-item\",children:/*#__PURE__*/_jsx(List.Item.Meta,{avatar:/*#__PURE__*/_jsx(Avatar,{size:\"small\",style:{backgroundColor:notification.type==='success'?'#52c41a':notification.type==='warning'?'#faad14':'#1890ff'}}),title:notification.title,description:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:notification.message}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Text,{type:\"secondary\",className:\"notification-time\",children:notification.time})]})})},notification.id)})}),/*#__PURE__*/_jsx(Card,{title:\"Calendar\",className:\"calendar-card\",children:/*#__PURE__*/_jsx(Calendar,{fullscreen:false,onPanelChange:onPanelChange,className:\"dashboard-calendar\"})})]})]})]});const renderActivityTab=()=>/*#__PURE__*/_jsx(Card,{title:\"Recent Activity\",className:\"activity-card\",children:loading?/*#__PURE__*/_jsx(Skeleton,{active:true}):/*#__PURE__*/_jsx(Timeline,{items:dashboardData===null||dashboardData===void 0?void 0:dashboardData.activities.map(activity=>({children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Text,{strong:true,children:activity.action}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:activity.item}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Text,{type:\"secondary\",className:\"activity-time\",children:activity.time})]})}))})});const renderBusinessAnalytics=()=>{if(!user||!user.businessId)return null;return/*#__PURE__*/_jsx(Card,{title:/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-header\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(RobotOutlined,{}),\" AI Business Analytics\"]}),/*#__PURE__*/_jsxs(Radio.Group,{value:analyticsPeriod,onChange:e=>handlePeriodChange(e.target.value),buttonStyle:\"solid\",size:\"small\",children:[/*#__PURE__*/_jsx(Radio.Button,{value:\"week\",children:\"Week\"}),/*#__PURE__*/_jsx(Radio.Button,{value:\"month\",children:\"Month\"}),/*#__PURE__*/_jsx(Radio.Button,{value:\"quarter\",children:\"Quarter\"}),/*#__PURE__*/_jsx(Radio.Button,{value:\"year\",children:\"Year\"})]})]}),className:\"analytics-card\",loading:analyticsLoading,children:businessAnalytics?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Row,{gutter:[16,16],children:[/*#__PURE__*/_jsx(Col,{xs:24,sm:12,md:6,children:/*#__PURE__*/_jsx(Statistic,{title:\"Demand Score\",value:businessAnalytics.demandScore?(businessAnalytics.demandScore*100).toFixed(0):0,suffix:\"%\",prefix:/*#__PURE__*/_jsx(TrendingUpOutlined,{}),valueStyle:{color:'#3f8600'}})}),/*#__PURE__*/_jsx(Col,{xs:24,sm:12,md:6,children:/*#__PURE__*/_jsx(Statistic,{title:\"Customer Satisfaction\",value:businessAnalytics.customerSatisfaction?(businessAnalytics.customerSatisfaction*100).toFixed(0):0,suffix:\"%\",prefix:/*#__PURE__*/_jsx(SmileOutlined,{}),valueStyle:{color:'#1890ff'}})}),/*#__PURE__*/_jsx(Col,{xs:24,sm:12,md:6,children:/*#__PURE__*/_jsx(Statistic,{title:\"Growth Trend\",value:businessAnalytics.growthTrend||0,prefix:/*#__PURE__*/_jsx(RiseOutlined,{}),valueStyle:{color:businessAnalytics.growthTrend>0?'#3f8600':'#cf1322'},suffix:\"%\"})}),/*#__PURE__*/_jsx(Col,{xs:24,sm:12,md:6,children:/*#__PURE__*/_jsx(Statistic,{title:\"Competitive Position\",value:businessAnalytics.competitivePosition||'Average',prefix:/*#__PURE__*/_jsx(TrophyOutlined,{})})})]}),businessAnalytics.topPerformingEvents&&businessAnalytics.topPerformingEvents.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-section\",children:[/*#__PURE__*/_jsx(Title,{level:5,children:\"Top Performing Events\"}),/*#__PURE__*/_jsx(List,{size:\"small\",dataSource:businessAnalytics.topPerformingEvents,renderItem:event=>{var _event$revenue;return/*#__PURE__*/_jsx(List.Item,{children:/*#__PURE__*/_jsx(List.Item.Meta,{title:event.title,description:`Score: ${(event.score*100).toFixed(0)}% • Revenue: $${((_event$revenue=event.revenue)===null||_event$revenue===void 0?void 0:_event$revenue.toFixed(2))||0}`})});}})]}),businessAnalytics.recommendations&&businessAnalytics.recommendations.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-section\",children:[/*#__PURE__*/_jsx(Title,{level:5,children:\"AI Recommendations\"}),/*#__PURE__*/_jsx(List,{size:\"small\",dataSource:businessAnalytics.recommendations,renderItem:recommendation=>/*#__PURE__*/_jsx(List.Item,{children:/*#__PURE__*/_jsx(List.Item.Meta,{title:recommendation.title,description:recommendation.description})})})]}),businessAnalytics.customerSegments&&/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-section\",children:[/*#__PURE__*/_jsx(Title,{level:5,children:\"Customer Segments\"}),/*#__PURE__*/_jsx(Row,{gutter:[16,16],children:Object.entries(businessAnalytics.customerSegments).map(_ref=>{let[segment,percentage]=_ref;return/*#__PURE__*/_jsx(Col,{xs:24,sm:12,md:8,children:/*#__PURE__*/_jsx(Card,{size:\"small\",children:/*#__PURE__*/_jsx(Statistic,{title:segment,value:percentage,suffix:\"%\"})})},segment);})})]}),businessAnalytics.pricingInsights&&/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-section\",children:[/*#__PURE__*/_jsx(Title,{level:5,children:\"Pricing Insights\"}),/*#__PURE__*/_jsx(Alert,{message:businessAnalytics.pricingInsights.recommendation,description:businessAnalytics.pricingInsights.explanation,type:\"info\",showIcon:true})]})]}):/*#__PURE__*/_jsx(Empty,{description:\"No analytics available yet. Create more events to get business insights.\"})});};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-header\",children:/*#__PURE__*/_jsx(Title,{level:1,className:\"dashboard-title\",children:\"Dashboard\"})}),/*#__PURE__*/_jsxs(Tabs,{activeKey:activeTab,onChange:setActiveTab,className:\"dashboard-tabs\",children:[/*#__PURE__*/_jsx(TabPane,{tab:\"Overview\",children:renderOverviewTab()},\"overview\"),/*#__PURE__*/_jsx(TabPane,{tab:\"Activity\",children:renderActivityTab()},\"activity\"),/*#__PURE__*/_jsx(TabPane,{tab:\"Analytics\",children:renderBusinessAnalytics()},\"analytics\")]})]});};export default DashboardScreen;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}