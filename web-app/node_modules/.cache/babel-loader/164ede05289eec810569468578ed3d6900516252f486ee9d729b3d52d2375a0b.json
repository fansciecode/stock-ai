{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Typography,Box,Paper,Divider,Button,Grid,CircularProgress}from'@mui/material';import{useNavigate}from'react-router-dom';import axios from'axios';import{useAuth}from'../../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OrderScreen=()=>{const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const navigate=useNavigate();const{user}=useAuth();useEffect(()=>{const fetchOrders=async()=>{try{setLoading(true);const{data}=await axios.get('/api/orders');setOrders(data);setLoading(false);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to fetch orders');setLoading(false);}};fetchOrders();},[]);const handleOrderDetails=orderId=>{navigate(`/order/${orderId}`);};if(loading){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",minHeight:\"80vh\",children:/*#__PURE__*/_jsx(CircularProgress,{})});}if(error){return/*#__PURE__*/_jsx(Container,{maxWidth:\"md\",children:/*#__PURE__*/_jsxs(Box,{my:4,textAlign:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"error\",gutterBottom:true,children:error}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:()=>window.location.reload(),children:\"Try Again\"})]})});}return/*#__PURE__*/_jsx(Container,{maxWidth:\"lg\",children:/*#__PURE__*/_jsxs(Box,{my:4,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"My Orders\"}),/*#__PURE__*/_jsx(Divider,{sx:{mb:3}}),orders.length===0?/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:3,textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"You don't have any orders yet\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",sx:{mt:2},onClick:()=>navigate('/events'),children:\"Browse Events\"})]}):/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:orders.map(order=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Paper,{elevation:2,sx:{p:3,'&:hover':{boxShadow:6,cursor:'pointer'}},onClick:()=>handleOrderDetails(order._id),children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:8,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[\"Order #\",order._id.substring(0,8)]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Placed on: \",new Date(order.createdAt).toLocaleDateString()]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:4,textAlign:\"right\",children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",color:\"primary\",children:[\"$\",order.totalAmount.toFixed(2)]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{color:order.status==='COMPLETED'?'success.main':order.status==='PENDING'?'warning.main':'info.main'},children:order.status})]})]})})},order._id))})]})});};export default OrderScreen;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}